{% extends "base.html" %}

{% block content %}

<style>
/* ===============================
   FIX: Dropdown text visibility
   =============================== */
select, select option {
    color: #0b0b0b !important;
    background-color: #ffffff !important;
}

/* When options are highlighted */
select option:checked,
select option:active,
select option:hover,
select option:focus {
    color: #0b0b0b !important;
    background-color: #dbeeff !important;
}

/* Closed select appearance */
select {
    background-color: #1e1e1e;
    color: #ffffff !important;
    border: 1px solid #444;
    padding: 0.5rem;
    border-radius: 6px;
}

/* Focused select */
select:focus {
    outline: none;
    border-color: #007bff;
    background-color: #ffffff !important;
    color: #0b0b0b !important;
}

/* Form styling */
.card {
    background: #1e1e1e;
    padding: 2rem;
    border-radius: 10px;
    color: white;
}

input {
    width: 100%;
    padding: 0.65rem;
    margin-top: 0.3rem;
    border-radius: 6px;
    border: 1px solid #444;
    background-color: #121212;
    color: #ffffff;
}

input:focus {
    outline: none;
    border-color: #007bff;
}

label {
    margin-top: 1rem;
    display: block;
    font-size: 0.9rem;
    color: #cccccc;
}

.btn-primary {
    margin-top: 1.5rem;
    padding: 0.75rem;
    background-color: #28a745;
    width: 100%;
    border: none;
    color: white;
    font-size: 1.1rem;
    border-radius: 6px;
}

.btn-primary:hover {
    background-color: #218838;
}
</style>

<div class="card" style="max-width: 500px; margin: 2rem auto;">
    <h2 style="text-align: center; margin-bottom: 2rem;">Register</h2>

    <form method="POST">

        <!-- ROLE -->
        <label for="role">Role</label>
        <select id="role" name="role" required>
            <option value="">-- Select Role --</option>
            <option value="patient">Patient</option>
            <option value="doctor">Doctor</option>
        </select>

        <!-- NAME -->
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" required>

        <!-- USERNAME -->
        <label for="username">Username</label>
        <input type="text" id="username" name="username" required>

        <!-- PASSWORD -->
        <label for="password">Password</label>
        <input 
            type="password" 
            id="password" 
            name="password" 
            required
            pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}"
            title="Password must contain at least 8 characters, including uppercase, lowercase, number, and special character."
        >

        <button type="submit" class="btn-primary">Register</button>
    </form>

    <p style="text-align: center; margin-top: 1.5rem;">
        Already have an account?  
        <a href="/login" style="color: #00aaff;">Login here</a>
    </p>
</div>

<!-- JS fallback to ensure dropdown readability -->
<script>
function enforceSelectColors(id) {
    const el = document.getElementById(id);
    if (!el) return;

    el.addEventListener('mousedown', () => {
        el.style.backgroundColor = "#ffffff";
        el.style.color = "#0b0b0b";
    });

    el.addEventListener('blur', () => {
        el.style.backgroundColor = "#1e1e1e";
        el.style.color = "#ffffff";
    });
}

enforceSelectColors('role');
</script>

{% endblock %}
